import{_ as fe,r as a,c as d,z as ge,o as t,d as h,e as A,f as u,w as n,A as te,B as me,i as w,b as ne,F as k,x as C,y as b}from"./index.350a3b31.js";import{e as pe}from"./moment.672476b7.js";import{f as he}from"./product.348d4254.js";const be={class:"crumbs"},ye=w("\u89C4\u5219\u914D\u7F6E"),Ve=w("\u89C4\u5219\u5C55\u793A"),xe={class:"container"},ke={class:"handle-box"},Ce=w(" \u6E38\u620F\u9009\u62E9: "),we=w("\xA0 \u6E20\u9053\u9009\u62E9: "),Ee=w("\xA0 \u7248\u672C\u9009\u62E9: "),He={__name:"QueryExcel",setup(De){const E=a(""),y=a(""),V=a(""),U=a([]),N=a([]),I=a([]),M=a(""),Q=a([]),S=a([]),r=a([]),q=a([]),L=a([]),P=a([]),F=a([]),H=a(""),$=a(!0);console.log("this.$refs.table ",M);const oe=()=>{he().then(o=>{console.log("fetchVersionProductChannelData",o.data),U.value=o.data}).catch(()=>{})},ce=()=>{y.value="",V.value="",N.value=U.value.filter(o=>o.value==E.value)[0].children},se=()=>{V.value="",I.value=N.value.filter(o=>o.value==y.value)[0].children},ue=()=>{let o={product_id:E.value,versions_b:V.value,channel:y.value};pe(o).then(e=>{var v,c,s,_,i,f,g,D,T,l,B,m,p;e.status==200?($.value=!1,Q.value=(v=e.data)==null?void 0:v.tab_name.filter(j=>j>""),Q.value>""?(H.value=(c=e.data)==null?void 0:c.tab_name[0],S.value=(s=e.data)==null?void 0:s.rules,r.value=(i=(_=e.data)==null?void 0:_.rules[0])==null?void 0:i.config_data.slice(0,10),q.value=(g=(f=e.data)==null?void 0:f.rules[0])==null?void 0:g.tab_filed_name,L.value=(T=(D=e.data)==null?void 0:D.rules[0])==null?void 0:T.tab_filed_type,P.value=(B=(l=e.data)==null?void 0:l.rules[0])==null?void 0:B.tab_filed_desc,F.value=(p=(m=e.data)==null?void 0:m.rules[0])==null?void 0:p.tab_filed_cs,document.addEventListener("scroll",j=>{var G,J,K,O,R,W,X,Y,Z,ee,le,ae;if(((J=(G=e.data)==null?void 0:G.rules[0])==null?void 0:J.config_data.length)>10){let x=1;const z=j.target,ie=z.clientHeight,_e=z.scrollTop,de=z.scrollHeight;if(ie+_e===de){x=x+1;const ve=100*x>((O=(K=e.data)==null?void 0:K.rules[0])==null?void 0:O.config_data.length)?(W=(R=e.data)==null?void 0:R.rules[0])==null?void 0:W.config_data.length:100*x;r.value=(Y=(X=e.data)==null?void 0:X.rules[0])==null?void 0:Y.config_data.slice(0,ve)}else r.value=(ee=(Z=e.data)==null?void 0:Z.rules[0])==null?void 0:ee.config_data.slice(0,100*x)}else r.value=(ae=(le=e.data)==null?void 0:le.rules[0])==null?void 0:ae.config_data.slice(0,10)},!0)):ne.error("\u6CA1\u6709\u5339\u914D\u5230\u6570\u636E\uFF01")):ne.error(e==null?void 0:e.message)})},re=o=>{const e=S.value[o.index];r.value=e==null?void 0:e.config_data.slice(0,10),q.value=e==null?void 0:e.tab_filed_name,L.value=e==null?void 0:e.tab_filed_type,P.value=e==null?void 0:e.tab_filed_desc,F.value=e==null?void 0:e.tab_filed_cs,console.log("table_data?.config_data",e==null?void 0:e.config_data),console.log("table_data?.config_data.length",e==null?void 0:e.config_data.length),document.addEventListener("scroll",v=>{if((e==null?void 0:e.config_data.length)>10){let c=1;const s=v.target,_=s.clientHeight,i=s.scrollTop,f=s.scrollHeight;if(_+i===f){c=c+1;const g=100*c>(e==null?void 0:e.config_data.length)?e==null?void 0:e.config_data.length:100*c;r.value=e==null?void 0:e.config_data.slice(0,g)}else r.value=e==null?void 0:e.config_data.slice(0,100*c)}else r.value=e==null?void 0:e.config_data.slice(0,10)},!0)};return oe(),(o,e)=>{const v=d("el-breadcrumb-item"),c=d("el-breadcrumb"),s=d("el-option"),_=d("el-select"),i=d("el-table-column"),f=d("el-table"),g=d("el-tab-pane"),D=d("el-tabs"),T=ge("loading");return t(),h("div",null,[A("div",be,[u(c,{separator:"/"},{default:n(()=>[u(v,null,{default:n(()=>[ye]),_:1}),u(v,null,{default:n(()=>[Ve]),_:1})]),_:1})]),A("div",xe,[A("div",ke,[Ce,u(_,{onChange:ce,style:{width:"13%"},modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=l=>E.value=l),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2"},{default:n(()=>[(t(!0),h(k,null,C(U.value,l=>(t(),b(s,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),we,u(_,{onChange:se,style:{width:"13%"},modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),placeholder:"\u6E20\u9053\u9009\u62E9",class:"m-2"},{default:n(()=>[(t(!0),h(k,null,C(N.value,l=>(t(),b(s,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ee,u(_,{onChange:ue,style:{width:"13%"},modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l),placeholder:"\u7248\u672C\u9009\u62E9",class:"m-2"},{default:n(()=>[(t(!0),h(k,null,C(I.value,l=>(t(),b(s,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),te(u(D,{modelValue:H.value,"onUpdate:modelValue":e[3]||(e[3]=l=>H.value=l),type:"border-card",onTabClick:re},{default:n(()=>[(t(!0),h(k,null,C(Q.value,(l,B)=>(t(),b(g,{key:B,label:l,name:l},{default:n(()=>[te((t(),b(f,{height:"450",ref_for:!0,ref_key:"table",ref:M,"element-loading-text":"\u62FC\u547D\u52A0\u8F7D\u4E2D","element-loading-spinner":"el-icon-loading",data:r.value},{default:n(()=>[(t(!0),h(k,null,C(q.value,(m,p)=>(t(),b(i,{key:m,label:m,width:"180"},{default:n(()=>[u(i,{label:L.value[p]},{default:n(()=>[u(i,{label:P.value[p]},{default:n(()=>[u(i,{label:F.value[p],prop:m},null,8,["label","prop"])]),_:2},1032,["label"])]),_:2},1032,["label"])]),_:2},1032,["label"]))),128))]),_:1},8,["data"])),[[T,$.value]])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),[[me,H.value]])])])}}};var Ne=fe(He,[["__scopeId","data-v-d73e8dee"],["__file","/Users/apple/Desktop/github-c/project__c/src/views/QueryExcel.vue"]]);export{Ne as default};
