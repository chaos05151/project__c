import{_ as fe,r as a,o as t,c as p,d as K,e as u,w as n,b7 as te,br as ge,g as w,b as ne,h as _,aM as me,V as x,aK as C,a5 as b}from"./index.7723f14f.js";import{e as he}from"./moment.59901b97.js";import{f as pe}from"./product.b0250884.js";const be={class:"crumbs"},ye=w("\u89C4\u5219\u914D\u7F6E"),Ve=w("\u89C4\u5219\u5C55\u793A"),ke={class:"container"},xe={class:"handle-box"},Ce=w(" \u6E38\u620F\u9009\u62E9: "),we=w("\xA0 \u6E20\u9053\u9009\u62E9: "),He=w("\xA0 \u7248\u672C\u9009\u62E9: "),Ee={__name:"QueryExcel",setup(Te){const H=a(""),y=a(""),V=a(""),N=a([]),U=a([]),S=a([]),$=a(""),q=a([]),j=a([]),r=a([]),L=a([]),P=a([]),Q=a([]),M=a([]),E=a(""),z=a(!0);console.log("this.$refs.table ",$);const oe=()=>{pe().then(o=>{console.log("fetchVersionProductChannelData",o.data),N.value=o.data}).catch(()=>{})},ce=()=>{y.value="",V.value="",U.value=N.value.filter(o=>o.value==H.value)[0].children},se=()=>{V.value="",S.value=U.value.filter(o=>o.value==y.value)[0].children},ue=()=>{let o={product_id:H.value,versions_b:V.value,channel:y.value};he(o).then(e=>{var v,c,s,i,d,f,g,T,D,l,B,m,h;e.status==200?(z.value=!1,q.value=(v=e.data)==null?void 0:v.tab_name.filter(F=>F>""),q.value>""?(E.value=(c=e.data)==null?void 0:c.tab_name[0],j.value=(s=e.data)==null?void 0:s.rules,r.value=(d=(i=e.data)==null?void 0:i.rules[0])==null?void 0:d.config_data.slice(0,10),L.value=(g=(f=e.data)==null?void 0:f.rules[0])==null?void 0:g.tab_filed_name,P.value=(D=(T=e.data)==null?void 0:T.rules[0])==null?void 0:D.tab_filed_type,Q.value=(B=(l=e.data)==null?void 0:l.rules[0])==null?void 0:B.tab_filed_desc,M.value=(h=(m=e.data)==null?void 0:m.rules[0])==null?void 0:h.tab_filed_cs,document.addEventListener("scroll",F=>{var A,G,J,O,R,W,X,Y,Z,ee,le,ae;if(((G=(A=e.data)==null?void 0:A.rules[0])==null?void 0:G.config_data.length)>10){let k=1;const I=F.target,de=I.clientHeight,ie=I.scrollTop,_e=I.scrollHeight;if(de+ie===_e){k=k+1;const ve=100*k>((O=(J=e.data)==null?void 0:J.rules[0])==null?void 0:O.config_data.length)?(W=(R=e.data)==null?void 0:R.rules[0])==null?void 0:W.config_data.length:100*k;r.value=(Y=(X=e.data)==null?void 0:X.rules[0])==null?void 0:Y.config_data.slice(0,ve)}else r.value=(ee=(Z=e.data)==null?void 0:Z.rules[0])==null?void 0:ee.config_data.slice(0,100*k)}else r.value=(ae=(le=e.data)==null?void 0:le.rules[0])==null?void 0:ae.config_data.slice(0,10)},!0)):ne.error("\u6CA1\u6709\u5339\u914D\u5230\u6570\u636E\uFF01")):ne.error(e==null?void 0:e.message)})},re=o=>{const e=j.value[o.index];r.value=e==null?void 0:e.config_data.slice(0,10),L.value=e==null?void 0:e.tab_filed_name,P.value=e==null?void 0:e.tab_filed_type,Q.value=e==null?void 0:e.tab_filed_desc,M.value=e==null?void 0:e.tab_filed_cs,console.log("table_data?.config_data",e==null?void 0:e.config_data),console.log("table_data?.config_data.length",e==null?void 0:e.config_data.length),document.addEventListener("scroll",v=>{if((e==null?void 0:e.config_data.length)>10){let c=1;const s=v.target,i=s.clientHeight,d=s.scrollTop,f=s.scrollHeight;if(i+d===f){c=c+1;const g=100*c>(e==null?void 0:e.config_data.length)?e==null?void 0:e.config_data.length:100*c;r.value=e==null?void 0:e.config_data.slice(0,g)}else r.value=e==null?void 0:e.config_data.slice(0,100*c)}else r.value=e==null?void 0:e.config_data.slice(0,10)},!0)};return oe(),(o,e)=>{const v=_("el-breadcrumb-item"),c=_("el-breadcrumb"),s=_("el-option"),i=_("el-select"),d=_("el-table-column"),f=_("el-table"),g=_("el-tab-pane"),T=_("el-tabs"),D=me("loading");return t(),p("div",null,[K("div",be,[u(c,{separator:"/"},{default:n(()=>[u(v,null,{default:n(()=>[ye]),_:1}),u(v,null,{default:n(()=>[Ve]),_:1})]),_:1})]),K("div",ke,[K("div",xe,[Ce,u(i,{onChange:ce,style:{width:"13%"},modelValue:H.value,"onUpdate:modelValue":e[0]||(e[0]=l=>H.value=l),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2"},{default:n(()=>[(t(!0),p(x,null,C(N.value,l=>(t(),b(s,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),we,u(i,{onChange:se,style:{width:"13%"},modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),placeholder:"\u6E20\u9053\u9009\u62E9",class:"m-2"},{default:n(()=>[(t(!0),p(x,null,C(U.value,l=>(t(),b(s,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),He,u(i,{onChange:ue,style:{width:"13%"},modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l),placeholder:"\u7248\u672C\u9009\u62E9",class:"m-2"},{default:n(()=>[(t(!0),p(x,null,C(S.value,l=>(t(),b(s,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),te(u(T,{modelValue:E.value,"onUpdate:modelValue":e[3]||(e[3]=l=>E.value=l),type:"border-card",onTabClick:re},{default:n(()=>[(t(!0),p(x,null,C(q.value,(l,B)=>(t(),b(g,{key:B,label:l,name:l},{default:n(()=>[te((t(),b(f,{height:"450",ref_for:!0,ref_key:"table",ref:$,"element-loading-text":"\u62FC\u547D\u52A0\u8F7D\u4E2D","element-loading-spinner":"el-icon-loading",data:r.value},{default:n(()=>[(t(!0),p(x,null,C(L.value,(m,h)=>(t(),b(d,{key:m,label:m,width:"180"},{default:n(()=>[u(d,{label:P.value[h]},{default:n(()=>[u(d,{label:Q.value[h]},{default:n(()=>[u(d,{label:M.value[h],prop:m},null,8,["label","prop"])]),_:2},1032,["label"])]),_:2},1032,["label"])]),_:2},1032,["label"]))),128))]),_:1},8,["data"])),[[D,z.value]])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),[[ge,E.value]])])])}}};var Ue=fe(Ee,[["__scopeId","data-v-7de77b1f"]]);export{Ue as default};
