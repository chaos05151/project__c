import{_ as O,r as c,a as A,u as E,bA as F,o as d,c as h,d as s,e as n,w as r,g as i,h as u,V as b,aK as f,a5 as y,t as K,p as L,i as W}from"./index.7723f14f.js";import{c as j,h as Y}from"./moment.59901b97.js";import{f as G}from"./product.b0250884.js";const C=c(""),x=c(""),k=c(""),v=c(""),D=c(""),w=c(""),q=c(),t=A({page_index:1,page_size:10}),N=c(1),B=c(),H=c(""),Q=c(),X=c([{value:"",label:"\u5168\u90E8"},{value:"1",label:"\u5BFC\u5165\u6210\u529F"},{value:"0",label:"\u5BFC\u5165\u5931\u8D25"}]),M=()=>{G().then(e=>{console.log("fetchVersionProductChannelData",e.data),v.value=e.data,C.value=e.data[0].value}).catch(()=>{})},Z=e=>{x.value="",k.value="",delete t.channel,delete t.versions,D.value=v.value.filter(o=>o.value==C.value)[0].children,console.log("query_channel",e),t.product_id=e,_(t)},$=e=>{k.value="",delete t.versions,e!=""?(w.value=D.value.filter(o=>o.value==x.value)[0].children,t.channel=e):delete t.channel,console.log("query_version",e),_(t)},ee=e=>{console.log("handle_version",e),e!=""?t.versions=e:delete t.versions,_(t)},_=e=>{j(e).then(o=>{console.log(o.data),N.value=o.data.total_count,q.value=o.data.lists.map(p=>({...p,import_status:p.import_status=="1"?"\u5BFC\u5165\u6210\u529F":"\u5BFC\u5165\u5931\u8D25",updated_at:Y(p.updated_at).format("YYYY-MM-DD HH:mm:ss")}))}).catch(()=>{})},le=e=>{t.page_index=e,_(t)},ae=e=>{if(console.log(e),e!=null){let o=Y(e[0]).format("YYYY-MM-DD HH:mm:ss"),p=Y(e[1]).format("YYYY-MM-DD HH:mm:ss");console.log(o,p),t.start_time=o,t.end_time=p}else delete t.start_time,delete t.end_time;_(t)},te=e=>{H.value=e,e==""?delete t.status:t.status=e,console.log(e),_(t)},oe={setup(){delete t.product_id,delete t.channel,delete t.versions,console.log("environment","production");const e=E();F(),localStorage.getItem("productoptions")!=null?(v.value=JSON.parse(localStorage.getItem("productoptions")),C.value=v.value[0].value,t.product_id=v.value[0].value,D.value=JSON.parse(localStorage.getItem("channeloptions")),w.value=JSON.parse(localStorage.getItem("versionoptions"))):(console.log("\u901A\u8FC7\u8BF7\u6C42\u65B9\u5F0F\u83B7\u53D6\u6E38\u620F\u7248\u672C\u6E20\u9053\u4FE1\u606F"),M()),console.log(v.value),_(t);const o=()=>{C.value="",x.value="",k.value="",H.value="",B.value=null,localStorage.removeItem("productoptions"),localStorage.removeItem("channeloptions"),localStorage.removeItem("versionoptions"),e.go(-1)};return console.log(q.value),{product_name_selected:C,channel_name_selected:x,version_name_selected:k,productoptions:v,channeloptions:D,versionoptions:w,tableData:q,query:t,pageTotal:N,import_status:X,status:H,dateSelect:B,operator:Q,getVersionProductChannelData:M,query_channel:Z,query_version:$,fetchImportResultData:_,handlePageChange:le,handleStatus:te,handleDateSelect:ae,goBack:o,handle_version:ee}}},V=e=>(L("data-v-0afeaea3"),e=e(),W(),e),ne={class:"crumbs"},se=V(()=>s("i",{class:"el-icon-lx-calendar"},null,-1)),re=i(" \u89C4\u5219\u914D\u7F6E\u8868\u5BFC\u5165 "),ce=i("\u914D\u7F6E\u8868\u5BFC\u5165"),de=i("\u914D\u7F6E\u8868\u5BFC\u5165\u5386\u53F2"),ue={class:"titlehead"},_e=V(()=>s("h2",{style:{marginRight:"20px",fontWeight:"500"}},"\u914D\u7F6E\u8868\u5BFC\u5165\u5386\u53F2",-1)),ie={class:"handle-box"},pe=i(" \u6E38\u620F\u9009\u62E9: "),me=i("\xA0 \u6E20\u9053\u9009\u62E9: "),ve=i("\xA0 \u7248\u672C\u9009\u62E9: "),he=i("\u8FD4\u56DE"),ge={class:"container"},be={class:"handle-selecter"},fe={class:"selecter-item"},ye=V(()=>s("span",null,"\u5BFC\u5165\u65F6\u95F4\uFF1A",-1)),Ce={class:"selecter-item"},Ve=V(()=>s("span",null,"\u5BFC\u5165\u72B6\u6001\uFF1A",-1)),Se={class:"selecter-item"},xe=V(()=>s("span",null,"\u64CD\u4F5C\u4EBA\uFF1A",-1)),ke={class:"pagination"};function De(e,o,p,a,Ie,Ye){const I=u("el-breadcrumb-item"),U=u("el-breadcrumb"),m=u("el-option"),g=u("el-select"),P=u("el-button"),R=u("el-date-picker"),S=u("el-table-column"),z=u("el-tag"),T=u("el-table"),J=u("el-pagination");return d(),h("div",null,[s("div",ne,[n(U,{separator:"/"},{default:r(()=>[n(I,null,{default:r(()=>[se,re]),_:1}),n(I,null,{default:r(()=>[ce]),_:1}),n(I,null,{default:r(()=>[de]),_:1})]),_:1})]),s("div",ue,[_e,s("div",ie,[pe,n(g,{onChange:a.query_channel,style:{width:"150px"},modelValue:a.product_name_selected,"onUpdate:modelValue":o[0]||(o[0]=l=>a.product_name_selected=l),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2"},{default:r(()=>[(d(!0),h(b,null,f(a.productoptions,l=>(d(),y(m,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),me,n(g,{onChange:a.query_version,style:{width:"150px"},modelValue:a.channel_name_selected,"onUpdate:modelValue":o[1]||(o[1]=l=>a.channel_name_selected=l),placeholder:"\u9009\u62E9\u6E20\u9053",class:"m-2"},{default:r(()=>[n(m,{value:"",label:"\u5168\u90E8",key:"-1"}),(d(!0),h(b,null,f(a.channeloptions,l=>(d(),y(m,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),ve,n(g,{onChange:a.handle_version,style:{width:"150px"},modelValue:a.version_name_selected,"onUpdate:modelValue":o[2]||(o[2]=l=>a.version_name_selected=l),placeholder:"\u5168\u90E8\u7248\u672C",class:"m-2"},{default:r(()=>[n(m,{value:"",label:"\u5168\u90E8",key:"-1"}),(d(!0),h(b,null,f(a.versionoptions,l=>(d(),y(m,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),n(P,{type:"primary",style:{"margin-left":"100px"},onClick:a.goBack},{default:r(()=>[he]),_:1},8,["onClick"])]),s("div",ge,[s("div",be,[s("div",fe,[ye,n(R,{modelValue:a.dateSelect,"onUpdate:modelValue":o[3]||(o[3]=l=>a.dateSelect=l),type:"daterange","range-separator":"\u2192","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",onChange:a.handleDateSelect},null,8,["modelValue","onChange"])]),s("div",Ce,[Ve,n(g,{style:{width:"200px"},modelValue:a.status,"onUpdate:modelValue":o[4]||(o[4]=l=>a.status=l),placeholder:"\u9009\u62E9\u72B6\u6001",onChange:a.handleStatus,class:"m-2"},{default:r(()=>[(d(!0),h(b,null,f(a.import_status,l=>(d(),y(m,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),s("div",Se,[xe,n(g,{style:{width:"200px"},modelValue:a.operator,"onUpdate:modelValue":o[5]||(o[5]=l=>a.operator=l),disabled:"",placeholder:"\u6B64\u529F\u80FD\u6682\u4E0D\u53EF\u7528",class:"m-2"},{default:r(()=>[(d(!0),h(b,null,f(a.versionoptions,l=>(d(),y(m,{key:l.value,value:l.value},null,8,["value"]))),128))]),_:1},8,["modelValue"])])]),n(T,{data:a.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header","empty-text":"\u6682\u65E0\u6570\u636E"},{default:r(()=>[n(S,{prop:"file_name",label:"\u6587\u4EF6\u540D\u79F0"}),n(S,{prop:"import_status",label:"\u72B6\u6001"},{default:r(l=>[n(z,{type:l.row.import_status==="\u5BFC\u5165\u6210\u529F"?"success":l.row.import_status==="\u5BFC\u5165\u5931\u8D25"?"danger":""},{default:r(()=>[i(K(l.row.import_status),1)]),_:2},1032,["type"])]),_:1}),n(S,{prop:"updated_at",label:"\u5BFC\u5165\u65F6\u95F4"}),n(S,{prop:"user_name",label:"\u64CD\u4F5C\u4EBA\u5458"})]),_:1},8,["data"]),s("div",ke,[n(J,{background:"",layout:"total, prev, pager, next","current-page":a.query.page_index,"page-size":a.query.page_size,total:a.pageTotal,onCurrentChange:a.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}var Be=O(oe,[["render",De],["__scopeId","data-v-0afeaea3"]]);export{Be as default};
