import{_ as O,r as c,a as j,u as F,C as E,c as u,o as d,d as h,e as s,f as n,w as r,i,F as b,x as f,y,t as L,p as W,j as A}from"./index.350a3b31.js";import{c as G,h as w}from"./moment.672476b7.js";import{f as K}from"./product.348d4254.js";const C=c(""),S=c(""),k=c(""),v=c(""),D=c(""),Y=c(""),q=c(),a=j({page_index:1,page_size:10}),M=c(1),U=c(),H=c(""),Q=c(),X=c([{value:"",label:"\u5168\u90E8"},{value:"1",label:"\u5BFC\u5165\u6210\u529F"},{value:"0",label:"\u5BFC\u5165\u5931\u8D25"}]),B=()=>{K().then(e=>{console.log("fetchVersionProductChannelData",e.data),v.value=e.data,C.value=e.data[0].value}).catch(()=>{})},Z=e=>{S.value="",k.value="",delete a.channel,delete a.versions,D.value=v.value.filter(o=>o.value==C.value)[0].children,console.log("query_channel",e),a.product_id=e,_(a)},$=e=>{k.value="",delete a.versions,e!=""?(Y.value=D.value.filter(o=>o.value==S.value)[0].children,a.channel=e):delete a.channel,console.log("query_version",e),_(a)},ee=e=>{console.log("handle_version",e),e!=""?a.versions=e:delete a.versions,_(a)},_=e=>{G(e).then(o=>{console.log(o.data),M.value=o.data.total_count,q.value=o.data.lists.map(p=>({...p,import_status:p.import_status=="1"?"\u5BFC\u5165\u6210\u529F":"\u5BFC\u5165\u5931\u8D25",updated_at:w(p.updated_at).format("YYYY-MM-DD HH:mm:ss")}))}).catch(()=>{})},le=e=>{a.page_index=e,_(a)},te=e=>{if(console.log(e),e!=null){let o=w(e[0]).format("YYYY-MM-DD HH:mm:ss"),p=w(e[1]).format("YYYY-MM-DD HH:mm:ss");console.log(o,p),a.start_time=o,a.end_time=p}else delete a.start_time,delete a.end_time;_(a)},ae=e=>{H.value=e,e==""?delete a.status:a.status=e,console.log(e),_(a)},oe={setup(){delete a.product_id,delete a.channel,delete a.versions,console.log("environment","development");const e=F();E(),localStorage.getItem("productoptions")!=null?(v.value=JSON.parse(localStorage.getItem("productoptions")),C.value=v.value[0].value,a.product_id=v.value[0].value,D.value=JSON.parse(localStorage.getItem("channeloptions")),Y.value=JSON.parse(localStorage.getItem("versionoptions"))):(console.log("\u901A\u8FC7\u8BF7\u6C42\u65B9\u5F0F\u83B7\u53D6\u6E38\u620F\u7248\u672C\u6E20\u9053\u4FE1\u606F"),B()),console.log(v.value),_(a);const o=()=>{C.value="",S.value="",k.value="",H.value="",U.value=null,localStorage.removeItem("productoptions"),localStorage.removeItem("channeloptions"),localStorage.removeItem("versionoptions"),e.go(-1)};return console.log(q.value),{product_name_selected:C,channel_name_selected:S,version_name_selected:k,productoptions:v,channeloptions:D,versionoptions:Y,tableData:q,query:a,pageTotal:M,import_status:X,status:H,dateSelect:U,operator:Q,getVersionProductChannelData:B,query_channel:Z,query_version:$,fetchImportResultData:_,handlePageChange:le,handleStatus:ae,handleDateSelect:te,goBack:o,handle_version:ee}}},V=e=>(W("data-v-7a68e843"),e=e(),A(),e),ne={class:"crumbs"},se=V(()=>s("i",{class:"el-icon-lx-calendar"},null,-1)),re=i(" \u89C4\u5219\u914D\u7F6E\u8868\u5BFC\u5165 "),ce=i("\u914D\u7F6E\u8868\u5BFC\u5165"),de=i("\u914D\u7F6E\u8868\u5BFC\u5165\u5386\u53F2"),ue={class:"titlehead"},_e=V(()=>s("h2",{style:{marginRight:"20px",fontWeight:"500"}},"\u914D\u7F6E\u8868\u5BFC\u5165\u5386\u53F2",-1)),ie={class:"handle-box"},pe=i(" \u6E38\u620F\u9009\u62E9: "),me=i("\xA0 \u6E20\u9053\u9009\u62E9: "),ve=i("\xA0 \u7248\u672C\u9009\u62E9: "),he=i("\u8FD4\u56DE"),ge={class:"container"},be={class:"handle-selecter"},fe={class:"selecter-item"},ye=V(()=>s("span",null,"\u5BFC\u5165\u65F6\u95F4\uFF1A",-1)),Ce={class:"selecter-item"},Ve=V(()=>s("span",null,"\u5BFC\u5165\u72B6\u6001\uFF1A",-1)),xe={class:"selecter-item"},Se=V(()=>s("span",null,"\u64CD\u4F5C\u4EBA\uFF1A",-1)),ke={class:"pagination"};function De(e,o,p,t,Ie,we){const I=u("el-breadcrumb-item"),N=u("el-breadcrumb"),m=u("el-option"),g=u("el-select"),P=u("el-button"),R=u("el-date-picker"),x=u("el-table-column"),z=u("el-tag"),T=u("el-table"),J=u("el-pagination");return d(),h("div",null,[s("div",ne,[n(N,{separator:"/"},{default:r(()=>[n(I,null,{default:r(()=>[se,re]),_:1}),n(I,null,{default:r(()=>[ce]),_:1}),n(I,null,{default:r(()=>[de]),_:1})]),_:1})]),s("div",ue,[_e,s("div",ie,[pe,n(g,{onChange:t.query_channel,style:{width:"150px"},modelValue:t.product_name_selected,"onUpdate:modelValue":o[0]||(o[0]=l=>t.product_name_selected=l),placeholder:"\u6E38\u620F\u9009\u62E9",class:"m-2"},{default:r(()=>[(d(!0),h(b,null,f(t.productoptions,l=>(d(),y(m,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),me,n(g,{onChange:t.query_version,style:{width:"150px"},modelValue:t.channel_name_selected,"onUpdate:modelValue":o[1]||(o[1]=l=>t.channel_name_selected=l),placeholder:"\u9009\u62E9\u6E20\u9053",class:"m-2"},{default:r(()=>[n(m,{value:"",label:"\u5168\u90E8",key:"-1"}),(d(!0),h(b,null,f(t.channeloptions,l=>(d(),y(m,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),ve,n(g,{onChange:t.handle_version,style:{width:"150px"},modelValue:t.version_name_selected,"onUpdate:modelValue":o[2]||(o[2]=l=>t.version_name_selected=l),placeholder:"\u5168\u90E8\u7248\u672C",class:"m-2"},{default:r(()=>[n(m,{value:"",label:"\u5168\u90E8",key:"-1"}),(d(!0),h(b,null,f(t.versionoptions,l=>(d(),y(m,{key:l.value,label:l.label_name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),n(P,{type:"primary",style:{"margin-left":"100px"},onClick:t.goBack},{default:r(()=>[he]),_:1},8,["onClick"])]),s("div",ge,[s("div",be,[s("div",fe,[ye,n(R,{modelValue:t.dateSelect,"onUpdate:modelValue":o[3]||(o[3]=l=>t.dateSelect=l),type:"daterange","range-separator":"\u2192","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",onChange:t.handleDateSelect},null,8,["modelValue","onChange"])]),s("div",Ce,[Ve,n(g,{style:{width:"200px"},modelValue:t.status,"onUpdate:modelValue":o[4]||(o[4]=l=>t.status=l),placeholder:"\u9009\u62E9\u72B6\u6001",onChange:t.handleStatus,class:"m-2"},{default:r(()=>[(d(!0),h(b,null,f(t.import_status,l=>(d(),y(m,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),s("div",xe,[Se,n(g,{style:{width:"200px"},modelValue:t.operator,"onUpdate:modelValue":o[5]||(o[5]=l=>t.operator=l),disabled:"",placeholder:"\u6B64\u529F\u80FD\u6682\u4E0D\u53EF\u7528",class:"m-2"},{default:r(()=>[(d(!0),h(b,null,f(t.versionoptions,l=>(d(),y(m,{key:l.value,value:l.value},null,8,["value"]))),128))]),_:1},8,["modelValue"])])]),n(T,{data:t.tableData,border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header","empty-text":"\u6682\u65E0\u6570\u636E"},{default:r(()=>[n(x,{prop:"file_name",label:"\u6587\u4EF6\u540D\u79F0"}),n(x,{prop:"import_status",label:"\u72B6\u6001"},{default:r(l=>[n(z,{type:l.row.import_status==="\u5BFC\u5165\u6210\u529F"?"success":l.row.import_status==="\u5BFC\u5165\u5931\u8D25"?"danger":""},{default:r(()=>[i(L(l.row.import_status),1)]),_:2},1032,["type"])]),_:1}),n(x,{prop:"updated_at",label:"\u5BFC\u5165\u65F6\u95F4"}),n(x,{prop:"user_name",label:"\u64CD\u4F5C\u4EBA\u5458"})]),_:1},8,["data"]),s("div",ke,[n(J,{background:"",layout:"total, prev, pager, next","current-page":t.query.page_index,"page-size":t.query.page_size,total:t.pageTotal,onCurrentChange:t.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])])])}var Ue=O(oe,[["render",De],["__scopeId","data-v-7a68e843"],["__file","/Users/apple/Desktop/github-c/project__c/src/views/ConfigImportHistory.vue"]]);export{Ue as default};
